# Background attenuation in sequences of images using the optical flow

## Install

    pip install "video_background_attenuation @ git+https://github.com/vicente-gonzalez-ruiz/video_background_attenuation"

## Usage

### Using simple background substraction:

Supposing that any pixel value change larger than `threshold=3` is generated by a change in the foreground, you can use (example):

    from video_background_attenuation import simple
    simple.attenuate_background_seq(
        input_sequence_prefix="/tmp/input/",
        output_sequence_prefix="/tmp/output/",
        img_extension=".jpg",
        first_img_index=0,
        last_img_index=120,
        alpha=0.99,   # Inertia of the background image to be modified
        threshold=3)  # Noise threshold

### Using the optical flow:

The same than before, but the pixels of the background are those where the motion is smaller than `threshold` (example):

    from video_background_attenuation import farneback
    farneback.attenuate_background_seq(
        input_sequence_prefix="/tmp/input/",
        output_sequence_prefix="/tmp/output/",
        img_extension=".jpg",
        first_img_index=0,
        last_img_index=120,
        alpha=0.99,      # Inertia of the background image to be modified
        threshold=3,     # Motion threshold
        levels=3,        # Levels of the Gaussian pyramid
        winsize=17,      # Side of the applicability window
        iterations=3,    # Number of iterations of Farneback's optial flow estimator
        poly_n=5,        # Degree of the polynomial expansion
        poly_sigma=1.2)  # Variance used in the polynomial expansion
